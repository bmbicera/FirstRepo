test2 Update
test2 update
(line: 2722 - 2749)
		
		4.1) if transaction.FinancialTransactionId Or 0 == 0
			(line: 2432 - 2509)
			
			4.1.1 if the CorpID == 2 and transaction.BillingPlanId >= 1 it will flag the IsAnnualUBC as true.(will be use later as a condition)
				(line:2437 - 2440)
			
			4.1.2 If IsAnnualUBC is true and TranType != "AR", it will then check the transaction.TransactionType if it is a "Refund" or not
					and if it is "Refund" it will run the method upsellHandleRefund(), if not then run the method upsellHandleAuthorization()
				(line: 2444- 2458)
				
				//Methods
				upsellHandleRefund() (line: 2728 - 2830) //called when transactionType is "Refund"
					- accepts parameter of string BatchType, string CCNumber, int OrderNumber, decimal Amount, bool Approved, string AuthCode,
					string DeclineReason, string TxnId, int FinancialTransactionID, DateTime TransactionDate, int MerchantId
					
					-it is responsible for creating FinancialTransaction records
					
					-it is also responsible for creating OrderNotes
			
				upsellHandleAuthorization() (line: 2831 - 3547)  //called when transactionType is not "Refund"
					- accepts parameter of string BatchType, string CCNumber, int OrderNumber, decimal Amount, bool Approved, string AuthCode,
					string DeclineReason, string TxnId, DateTime TransactionDate, int MerchantId
					
					
				
				
			4.1.3 If IsAnnualUBC is false
				
				if ipPreAuth != null && transaction.TransactionType == "PreAuth" && Message.StartsWith("APPROVED") it will call the  UpdateIPPreAuthDates()
					(line: 2462- 2466)
					UpdateIPPreAuthDates - updates the IPPreAuthDate,IPCaptureDate,CreditCardPreAuthorizationNumber,IPBillDate and create OrderNotes
				
				else if ipPreAuth == null && transaction.TransactionType == "PreAuth" it will call the usp_Billing_UpdateOrderFromPreAuthIPNSF that accepts a parameter of TransactionID
					(line: 2467- 2475)
					
				else it will call the getExistingFinancialTransactionId that accepts parameter of orderNumber and merchantTransactionId and return it to variable of financialTransId
					
					if financialTransId is 0 it will call the handleAuthorization() 
					
					handleAuthorization() - 
test update